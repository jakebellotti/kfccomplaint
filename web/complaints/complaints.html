<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KFC Complaints Register</title>
    <link rel="stylesheet" href="complaints.css">
    <script defer src="complaints.js"></script>
    <script defer src="../../lib/js/materialize.js"></script>
    <link rel="stylesheet" href="../../lib/fonts/MaterialIcons.css">
    <link rel="stylesheet" href="../../lib/css/materialize.css">
    <link rel="stylesheet" href="../main.css">
    <script src="../main.js" defer></script>
</head>
<body>
<!--Header to be put on all pages-->
<div class="kfc-cloud-header">
    <div class="kfc-cloud-header-side-container">
        <img class="kfc-cloud-header-logo" src="../kfclogo.png" height="30px" width="30"/>
        <p class="kfc-cloud-header-text">KFC CLOUD</p>
    </div>
    <p class="kfc-cloud-header-current-page">Complaints</p>
    <div class="kfc-cloud-header-side-container">
        <select onchange="headerPageSelectChanged(this);" class="kfc-cloud-header-page-select">
            <option value="../complaints/complaints.html" selected>Complaints</option>
            <option value="../count/count.html">Count</option>
            <option value="../reconciliation/">Daily Reconciliation</option>
            <option value="../wastage/wastage.html">Wastage</option>
        </select>
    </div>
</div>


<div id="settings-container">
    <button onclick="showSettingsWindow();" class="waves-light btn">Settings</button>
    <button onclick="showReportsWindow();" class="waves-light btn">Reports</button>
    <button onclick="showAboutWindow();" class="waves-light btn">About</button>
</div>

<header>
    <img src="../kfclogo.png">
    <p>KFC Complaints Register</p>
</header>

<!--Show complaints-->
<div id="show-complaints">
    <!--    TODO maybe filter by date range-->

    <div class="show-complaints-filter">
        <div id="show-complaints-buttons">
            <button id="filter-button-open" onclick="filterButtonClicked(this)" class="waves-light btn darken-4">
                Open
            </button>
            <button onclick="filterButtonClicked(this)" class="waves-light btn darken-4">Closed</button>
            <button onclick="filterButtonClicked(this)" class="waves-light btn darken-4">All</button>
        </div>
        <input oninput="updateResultsAccordingToSearch()" id="show-complaints-filter-search-name-input" type="text"
               placeholder="Search name or number...">
        <p id="total-results-text">Showing 0 of 10 results</p>
    </div>

    <div class="shown-complaints-button-container">
        <button class="waves-light btn" onclick="showAddComplaintWindow();">Add Complaint</button>
        <!--    <button class="waves-light btn" onclick="localStorage.clear()">Clear</button>-->
    </div>
    <div class="card-panel teal lighten-2 show-complaints-table" style="margin: 5px">
        <table class="centered">
            <thead>
            <tr>
                <th>Date</th>
                <th>Name</th>
                <th>Number</th>
                <th>Complaint Nature</th>
                <th>Staff Involved</th>
                <th>Description</th>
                <th>Credit Items</th>
                <th>Offered By</th>
                <th>Resolved</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="shown-complaints-tbody">
            </tbody>
        </table>
    </div>
</div>

<!--Add a complaint window-->
<div style="display: none;" class="modal-window-overlay" id="add-complaint-modal">

    <div class="add-complaint-window">
        <p id="add-complaint-header" class="modal-window-header">Add A Complaint</p>

        <div class="customer-details-container">
            <div>
                <p>Date</p>
                <input id="add-complaint-date" type="date">
            </div>

            <div>
                <p>Time</p>
                <input id="add-complaint-time" type="time">
            </div>

            <div>
                <p>Customer Name</p>
                <input id="add-complaint-customer-name" type="text"
                       onkeyup="addComplaintWindowUpdateMatchingContacts();" placeholder="Customer Name">
            </div>

            <div>
                <p>Customer Number</p>
                <input id="add-complaint-customer-number" onkeyup="addComplaintWindowUpdateMatchingContacts();"
                       type="text" placeholder="Customer Number">
            </div>
        </div>

        <!--        TODO make with check boxes-->
        <!--        TODO display aloneside each-->

        <div class="select-view-2">
            <div>
                <p class="add-p" onclick="showEditComplaintNatureWindow();">Nature Of Complaint</p>
                <select id="add-complaint-nature-select" class="complaint-nature-select" multiple></select>
            </div>

            <div class="add-button-container-div">
                <p class="add-p" onclick=" showEditManagerListWindow()">Credit Offered By</p>
                <select id="add-complaint-credit-offered-by-select" class="credit-offered-by-select"
                        name="credit-offered-by" multiple>
                </select>
            </div>
        </div>

        <div>
            <p class="add-p" onclick="showEditStaffListWindow();">Staff Involved</p>
            <div class="staff-involved-container">
                <select id="staff-involved-select" class="show-select">
                </select>
                <select id="staff-involved-role-select" class="show-select">
                    <option>D/T Order Taking</option>
                    <option>D/T Thru Pack</option>
                    <option>D/T Thru Hand Out</option>
                    <option>Lobby</option>
                    <option>Burger Bar</option>
                    <option>Kitchen</option>
                </select>
                <button id="staff-involved-add-button" onclick="staffInvolvedAddButtonClicked()"
                        class="waves-light btn">Add
                </button>
            </div>
            <table class="centered card-panel teal lighten-2">
                <thead>
                <tr>
                    <th>Staff Member</th>
                    <th>Staff Role</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="staff-involved-tbody">
                </tbody>
            </table>
        </div>

        <div class="add-complaint-window-description-wrapper">
            <div>
                <p>Order Description</p>
                <textarea id="add-complaint-order-description" class="custom-textarea"></textarea>
            </div>
            <div>
                <p>Credit Description</p>
                <textarea id="add-complaint-credit-description" class="custom-textarea"></textarea>
            </div>
        </div>

        <div class="add-complaint-window-buttons">
            <button id="add-complaint-button" class="waves-light btn" onclick="addComplaintWindow_AddButtonClicked();">
                Add Complaint
            </button>
            <button class="waves-light btn" onclick="addComplaintWindow_CancelButtonClicked()">Cancel</button>
        </div>
    </div>

    <div class="small-modal-window">
        <p class="modal-window-header">Existing Contacts</p>
        <table class="centered card-panel teal lighten-2">
            <thead>
            <tr>
                <th>Contact Name</th>
                <th>Contact Number</th>
            </tr>
            </thead>
            <tbody id="existing-contacts-tbody">
            </tbody>
        </table>
    </div>
</div>

<!--Settings window-->
<div id="settings-window" style="display: none;" class="modal-window-overlay">
    <div class="modal-window">
        <p class="modal-window-header">Settings</p>
        <div class="settings-window-options-container">
            <!--            TODO finish-->
            <button class="waves-light btn" onclick="settings_backupDataButtonClicked()">Backup Data</button>
            <button class="waves-light btn" onclick="importDataButtonClicked();">Import Data</button>
            <input id="file-input" onchange="backupFileSelected(this)" type="file" name="name" style="display: none;"/>
            <button class="waves-light btn" onclick="settings_resetDataButtonClicked();">Reset Data</button>
        </div>
        <div class="settings-window-button-container">
            <button class="waves-light btn" onclick="hideSettingsWindow();">Close</button>
        </div>
    </div>
</div>

<!--Resolve complaint window-->
<div style="display: none;" id="resolve-complaint-window" class="modal-window-overlay">
    <div class="modal-window">
        <p class="modal-window-header">Resolve Complaint</p>

        <div>
            <div>
                <p class="add-p" onclick="showEditManagerListWindow();">Credit Closed By</p>
                <select id="resolve-complaint-closed-by-select" style="min-height: 140px;"
                        class="credit-offered-by-select"
                        name="credit-offered-by" multiple>
                </select>
            </div>
            <div>
                <input id="resolve-complaint-promo-free" type="text" placeholder="Promo Free Receipt Number">
            </div>

            <div class="resolve-complaint-buttons-container">
                <button class="waves-light btn" onclick="resolveComplaint_SaveButtonClicked();">Save</button>
                <button class="waves-light btn" onclick="hideShowResolveComplaintWindow();">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!--Reports window-->
<div style="display: none;" id="reports-window" class="modal-window-overlay">
    <div class="modal-window">
        <p class="modal-window-header">Reports</p>
        <div id="reports-window-results-container"></div>
        <div class="settings-window-button-container">
            <button class="waves-light btn" onclick="hideReportsWindow();">Close</button>
        </div>
    </div>
</div>

<!--Edit list-->
<div id="edit-list-modal-window" style="display: none;" class="modal-window-overlay">
    <div class="modal-window">
        <p class="modal-window-header">Edit <span id="edit-list-span"></span></p>
        <div style="display: flex; justify-content: center;align-items: center">
            <input id="edit-list-input" type="text" placeholder="Name">
            <button id="edit-list-save-button" class="waves-light btn">Add</button>
            <button id="edit-list-cancel-button" style="display: none" class="waves-light btn red darken-2">Cancel
            </button>
        </div>
        <select id="edit-list-select" style="height: 300px;" class="show-select" size="10"></select>
        <button class="waves-light btn" onclick="closeEditListWindow();">Close</button>
    </div>
</div>

</body>
</html>